# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# Copyright 2019 Infoscitex, a DCS Company. All rights reserved.
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

script void ExpectDouble(double aValue, double aExpectation, double aTolerance, string aMessage)
   if (MATH.Fabs(aValue - aExpectation) > aTolerance)
   {
      writeln("-FAIL- ", aMessage, ": Value was ", aValue, " but expected ", aExpectation);
   }
end_script

script void ExpectInt(int aValue, int aExpectation, string aMessage)
   if (aValue != aExpectation)
   {
      writeln("-FAIL- ", aMessage, ": Value was ", aValue, " but expected ", aExpectation);
   }
end_script

script void ExpectString(string aValue, string aExpectation, string aMessage)
   if (aValue != aExpectation)
   {
      writeln("-FAIL- ", aMessage, ": Value was \n", aValue, " but expected \n", aExpectation);
   }
end_script

platform tle-hst WSF_PLATFORM
   add mover WSF_NORAD_SPACE_MOVER
      orbit
         0 HST
         1 20580U 90037B   19176.30423610  .00000333  00000-0  92680-5 0  9996
         2 20580  28.4681 168.2117 0002666 190.3324 294.3699 15.09238375401891
      end_orbit
   end_mover

   execute at_time 18 h absolute
      WsfSpaceMover mover = (WsfSpaceMover)PLATFORM.Mover();
      ExpectInt(mover.SatelliteNumber(), 20580, "Satellite Number");
      ExpectString(mover.Classification(), "U", "Satellite TLE Class");
      ExpectDouble(mover.BallisticCoefficient(), 0.00000333, 1.0e-10, "First deriv mean motion");
      ExpectDouble(mover.BStar(), 0.92680e-5, 1.0e-10, "BStar");
   end_execute
end_platform

start_date jun 26 2019
start_time 00:00:00.000
end_time 1 hours
