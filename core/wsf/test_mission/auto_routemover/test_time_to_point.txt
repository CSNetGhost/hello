# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

include_once ../auto_script/test_pass.txt
script_variables
   PassTestCount = 4;
end_script_variables

# Testing the time_to_point command
platform_type plat_type WSF_PLATFORM
   mover WSF_AIR_MOVER
      maximum_linear_acceleration 19.0 g
   end_mover
   script void CheckTime(double x)
      extern void pass();
      if (MATH.Fabs(TIME_NOW - x) > 0.1)
      {
         writeln("failed time_to_point - ", TIME_NOW, " - ", x);
      }
      else
      {
         pass();
         writeln("Time good: ", Name());
      }
   end_script
   script void CheckTime1()
      CheckTime(100.0);
   end_script
   script void CheckTime2()
      CheckTime(250.0);
   end_script
end_platform_type

# Normal test
platform tester plat_type
   route
      position 0n 0e
         speed 100 m/s
      position 1n 0e
         time_to_point 100 s
         execute CheckTime1
      position 1n 0.5e
         time_to_point 150 s
         execute CheckTime2
   end_route
end_platform

# Ensure we can start stopped, and pause_time has expected effect
platform tester2 plat_type
   route
      position 0n 0e
         speed 0 m/s
         pause_time 10 s
      position 1n 0e
         time_to_point 90 s
         execute CheckTime1
      position 1n 0.5e
         time_to_point 150 s
         execute CheckTime2
   end_route
end_platform

end_time 5 min
