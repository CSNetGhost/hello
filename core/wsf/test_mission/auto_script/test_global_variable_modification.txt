# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# Test_global_variable_modification.txt
# The Devel... functions make each reference and alter a global variable when called, thus
#  testing the updating and accessibility of the global parameter.

include test_functions.txt

script_variables
   global int gMY_INT = 111;
end_script_variables

script bool ChangeValueOnce()
   static bool once = true;
   if (once)
   {
      extern int gMY_INT;
      gMY_INT = 999;
      once = false;
   }
   return true;
end_script

script bool SetToStaticValue()
   extern int gMY_INT;
   gMY_INT = 888;
   return true;
end_script

on_initialize
   bool pass = true;
   ChangeValueOnce();
   if (gMY_INT != 999)
   {
      pass = false;
      writeln("-FAIL- on: global variable should have been set to 999, once, by now.");
   }

   SetToStaticValue();
   if (gMY_INT != 888)
   {
      pass = false;
      writeln("-FAIL- on: global variable should be of value 888 at this time");
   }

   writePass(pass);
end_on_initialize
