# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

script_variables
   bool mPassed = true;
   bool mDebug = false;
end_script_variables

#event_pipe
#   file test_air_mover_max_flight_path_angle.aer
#end_event_pipe

platform 737_sw_aircraft WSF_PLATFORM
   add mover WSF_AIR_MOVER
      maximum_flight_path_angle 10 degrees
      route
         position 34:10:18.42n 103:57:32.41w altitude 50000.00 ft heading 0 deg speed 500 m/s
         position 34:22:22.06n 103:57:32.41w altitude 30000.00 ft heading 0 deg # cause an aircraft dive
      end_route
   end_mover

   add processor processor_data WSF_SCRIPT_PROCESSOR
      update_interval 1.0 sec

      on_update
         extern bool mDebug;
         double pitch = PLATFORM.Pitch();
         if (mDebug)
         {
            writeln("TIME: ", TIME_NOW);
            writeln("Altitude: ", PLATFORM.Altitude());
            writeln("Pitch: ", pitch);
         }
         if (pitch < -10.0)
         {
            writeln("-FAIL- : test_air_mover_max_flight_path_angle.txt, pitch is: ", pitch);
            WsfSimulation.Terminate();
         }
      end_on_update
   end_processor
end_platform

end_time 700 sec