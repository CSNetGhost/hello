# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# EZJA test case 4
# Target is destroyed while within sensor volume

include_once spin_scheduler_resources.txt
include_once ../auto_script/test_functions.txt

observer 
   enable SENSOR_DETECTION_ATTEMPT 
   enable SIMULATION_COMPLETE 
end_observer

script void SimulationComplete()
   AssertTrueMessage(!samHits.Empty(), "Target platform never destroyed");
end_script

script void SensorDetectionAttempt(WsfPlatform aPlatform, WsfSensor aSensor, WsfPlatform aTarget, WsfSensorInteraction aResult)
   if (aPlatform.Name() == "200_ew_radar") 
   { 
      AssertTrueMessage(samHits.Empty(), "Platform detected after destruction");
   }
end_script

platform bomber_case_4_1 BOMBER 
   position 30:35n 80:00w
   
   side red
   altitude 30000 feet
   heading 270 degrees

   route
      position 30:35:00.000n 80:00:00.000w altitude 25000.00 ft
         speed 500 mph
      position 30:34:09.453n 81:33:20.250w altitude 25000.00 ft
   end_route
end_platform

edit platform sam_1 
   track platform bomber_case_4_1 end_track
end_platform
