# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# tests that DistanceAlongRoute() is working across the 180th meridian

route A
   position 0n 1e
      speed 100 m/s
   position 0n 1w
end_route

route B
   position 0n 179e
      speed 100 m/s
   position 0n 179w
end_route

platform_type distanceChecker WSF_PLATFORM
   mover WSF_AIR_MOVER
   end_mover
   execute at_interval_of 10 s
      double expectedDistance = TIME_NOW * 100;
      double reportedDistance = Route().DistanceAlongRoute(Location());
      double distanceError = expectedDistance - reportedDistance;
      if (MATH.Fabs(distanceError) > 10)
      {
         writeln("-FAIL- distance not correct");
      }
   end_execute
end_platform_type

platform a distanceChecker
    use_route A
end_platform

platform b distanceChecker
    use_route B
end_platform
