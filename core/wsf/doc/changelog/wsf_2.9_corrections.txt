.. ****************************************************************************
.. CUI
..
.. The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
..
.. The use, dissemination or disclosure of data in this file is subject to
.. limitation or restriction. See accompanying README and LICENSE for details.
.. ****************************************************************************

* New movers provided via :method:`WsfPlatform.SwapMover` now respect :command:`event_pipe.maximum_mover_update_interval`. (:issue:`AFSIM-2121`)
* A script compiler error is now produced under two new conditions: script methods declared with a non-void return type that fail to return a value, and unreachable script code due to inappropriate control flow (e.g. after ``return``). (:issue:`AFSIM-762`)
* Corrected an issue in the :command:`line_of_sight_manager` that could cause :ref:`multi-threaded<docs/simulation_control_commands:Multi-Threading Commands>` simulations to hang or crash. (:issue:`AFSIM-1244`)
* Corrected an issue in :method:`LocationValid2D()<WsfTrack.LocationValid2D>` that caused some tracks with known 3-D location information to report false for this method and true for :method:`LocationValid()<WsfTrack.LocationValid>`.  Clarified documentation for these methods. (:issue:`AFSIM-209`)
* Corrected an issue where :model:`WSF_TABULAR_ATTENUATION` was limiting attenuation values to the range [0, 1] absolute. (:issue:`AFSIM-172`)
* Corrected issues with :ref:`docs/event/sensor_events:SENSOR_FREQUENCY_CHANGED` event output that caused errors in :command:`event<event_output>` and :command:`CSV<csv_event_output>` files for some scenarios. (:issue:`AFSIM-179`)
* Invoking script :class:`Object` methods on :ref:`basic types<docs/script:Basic Types>` is now a script compilation error rather than a runtime exception. (:issue:`AFSIM-185`)
* Corrected the return value of script methods :method:`WsfSimulation.ExecuteAtTime`, :method:`WsfPlatform.ExecuteAtTime`, and :method:`WsfProcessor.ExecuteAtTime` to indicate whether the supplied script is valid. (:issue:`AFSIM-642`)
* Corrected an issue where GPS :command:`_.navigation_errors` were not being converted from a platform's local XYZ coordinate frame to the WCS frame correctly. (:issue:`AFSIM-932`)
* Corrected an issue with the :model:`WSF_ROTORCRAFT_MOVER` not moving along a route correctly after encountering a waypoint with a :command:`route.pause_time`. (:issue:`AFSIM-150`)
* Corrected an issue in the kinematic trajectory model for the :model:`WSF_TSPI_MOVER` that is used to predict future locations and time of apogee. (:issue:`AFSIM-167`)
* Corrected an issue where measurement data being sent over XIO was not preserving error values. (:issue:`AFSIM-1998`) 
* Corrected an issue where platforms with :ref:`route<docs/predefined_mover_types:Route Types>` movers initially turned off will move along the provided route, jumping between waypoints, despite the mover being off. (:issue:`AFSIM-182`)
* Corrected an issue where platforms with :ref:`route<docs/predefined_mover_types:Route Types>` movers initially turned off and given a route, if later turned on using the :method:`WsfMover.TurnOn` script method, will cause the platform to jump to the location on the route as if the mover had been on the entire time. (:issue:`AFSIM-183`)
* Corrected an issue where the :model:`WSF_ROAD_MOVER` would not use the road network when commanded using the :method:`WsfPlatform.GoToLocation` or :method:`WsfPlatform.FollowRoute` script methods. (:issue:`AFSIM-211`)
* Corrected an issue where platforms following a route with a segment longer than ~1/4 of the earth's circumference would not reach the proper location. (:issue:`AFSIM-311`)
* Corrected an issue where converting MGRS coordinates to Latitude/Longitude would fail in certain cases. (:issue:`AFSIM-1039`)
* Corrected a crash when using :method:`ProcessInput()<WsfObject.ProcessInput>` on a command that depends on other input that has not been loaded. For example, a route referenced in the :command:`_.route_mover.use_route` command must be loaded or the scenario crashed. A :command:`console_output` Info message will get issued when using the ProcessInput script method on a command with dependencies. (:issue:`AFSIM-1071`)
* Added missing documentation for :ref:`signal_processor.mti_processor` commands :command:`signal_processor.mti_processor.filtered_doppler_speed` and :command:`signal_processor.mti_processor.unfiltered_doppler_speed`. Added commands to the grammar for correct parsing in Wizard. (:issue:`AFSIM-1073`)
* Fixed crash that could occur when sending a :class:`WsfDraw` command over XIO. (:issue:`AFSIM-1097`)
* Corrected :command:`observer` documentation to include missing events, remove events no longer available, and accurately reflect event signatures. (:issue:`AFSIM-1099`)
* Removed excess console output from :method:`WsfPlatform.SetSignatureState`. (:issue:`AFSIM-234`)
* Added warnings when using various zone commands on zone shapes they are not intended for. (:issue:`AFSIM-1119`)
* Fixed crash that could occur when :command:`osm_traffic` vehicles are changing lanes to an unoccupied neighboring lane. (:issue:`AFSIM-1132`)
* Corrected the application of :command:`sensor_mode.range_error_sigma` value to the track measurement when *percent_of_true_range* is specified. (:issue:`AFSIM-1151`)
* Corrected an issue where :doc:`Advanced Behavior Tree<../advanced_behavior_tree>` Shared Blackboard script commands would not propagate all the way up the tree. (:issue:`AFSIM-1234`)
* Corrected an issue causing :command:`advanced_behavior_tree.priority_selector` to not work with :command:`advanced_behavior_tree.root_node_type` on :doc:`Advanced Behavior Trees<../advanced_behavior_tree>`.  Also fixed crashes involving :command:`advanced_behavior_tree.root_node_type` with :command:`advanced_behavior_tree.sequence_with_memory`/:command:`advanced_behavior_tree.selector_with_memory` nodes. (:issue:`AFSIM-1241`)
* Fixed the propulsion DIS appearance mask and added missing air domain flags. (:issue:`AFSIM-1209`)
* Corrected an issue where latitude and longitude values were inaccessible for :command:`route` waypoints defined with a turn command (:command:`route.turn_left`, :command:`route.turn_right`, or :command:`route.turn_to_heading`) and a :command:`route.distance` command. (:issue:`AFSIM-1204`)
* Added :ref:`docs/event/sensor_events:SENSOR_DETECTION_CHANGED` callbacks for :command:`event_output`, :command:`csv_event_output`, and :command:`observer` to indicate that detected targets are no longer detected on sensor turn off or when targets are deleted. (:issue:`AFSIM-134`)
* Corrected an issue in which using the script method :method:`Array\<T\>.Insert` would result in a script compilation error if T was not an :class:`Object`. (:issue:`AFSIM-1394`)
* Fixed an issue with the Record Length in the DIS Record Specification. (:issue:`AFSIM-1395`)
* Corrected an issue which often resulted in a crash when running :ref:`multi-threaded<docs/simulation_control_commands:Multi-Threading Commands>` with the :command:`event_pipe` (:issue:`AFSIM-1409`)
* Fixed two problems where platforms and :class:`WsfGeoPoints<WsfGeoPoint>` continued to utilize a WGS-84 Earth ellipsoid for coordinate conversions when another option for the :command:`global_environment.central_body` in the :command:`global_environment` is selected. (:issue:`AFSIM-1424`)
* Fixed an issue involving priority_selector selecting from multiple children weighted_random nodes incorrectly for :doc:`Advanced Behavior Trees<../advanced_behavior_tree>`. (:issue:`AFSIM-1298`)
* Fixed a crash that happens when the scenario input has a chain of :command:`include` commands that is too long. (:issue:`AFSIM-1653`)
* Corrected a crash in :command:`osm_traffic` that occurred when background vehicles exited the :command:`route_network` via an one-way road. Vehicles are now deleted and a new vehicle is spawned at the beginning of a road that originates from an edge of the network. (:issue:`AFSIM-1677`)
* Fixed incorrect parsing of script string literals. (:issue:`AFSIM-1788`)
* Corrected an issue in which floating point values provided to :argtype:`integer` inputs would silently truncate the input. An input error is now generated in such a case. (:issue:`AFSIM-2273`)
* Changed :command:`console_output` format of :command:`script_struct` to no longer span multiple lines. (:issue:`AFSIM-1722`)
* :model:`WSF_KINEMATIC_MOVER` now correctly reports velocity vector. (:issue:`AFSIM-1729`)
* Fixed an issue where :command:`WSF_TSPI_MOVER.relocate_and_rotate` used a spherical earth model instead of an ellipsoidal earth. (:issue:`AFSIM-177`)
* Fixed an issue where a :model:`WSF_TSPI_MOVER` would always report 0 heading after a :command:`WSF_TSPI_MOVER.relocate_and_rotate` command. (:issue:`AFSIM-730`)
* :model:`WSF_KINEMATIC_MOVER` now correctly reports acceleration. (:issue:`AFSIM-1730`)
* Corrected an issue with :command:`WSF_RADAR_SENSOR.error_model_parameters.azimuth_beamwidth` and :command:`WSF_RADAR_SENSOR.error_model_parameters.elevation_beamwidth` where the error sigmas should have been driven by steered beamwidth when electronic beam steering was enabled. (:issue:`AFSIM-1006`)
* Corrected documentation for structures in :doc:`aux data<../aux_data>`. (:issue:`AFSIM-131`) 
* Corrected an issue when computing :command:`sensor_mode.range_rate_error_sigma` to reflect doppler resolution used in :model:`WSF_RADAR_SENSOR` as a velocity instead of frequency. (:issue:`AFSIM-1325`)
* Corrected an issue where enabling :command:`csv_event_output` or :command:`event_output.print_eci_locations` for :command:`event_output` would change the initial orbiting locations of satellites. (:issue:`AFSIM-1878`)
* :class:`WsfFuel` now correctly inherits :class:`WsfPlatformPart` as documented, making :class:`WsfPlatformPart` script methods available on fuel objects. (:issue:`AFSIM-2029`)
* Fixed a regression introduced from :issue:`AFSIM-169` regarding usage of :command:`route.transform_route` with :command:`route.offset` waypoints. (:issue:`AFSIM-1885`)
* :command:`event_pipe.maximum_mover_update_interval` will now properly interact with  :command:`mover.update_interval` set from :command:`_.script_commands.script_variables`. (:issue:`AFSIM-2180`)
* Corrected multiple issues causing a :command:`advanced_behavior_tree.priority_selector` node to call the precondition block for its selected node twice in one tick. (:issue:`AFSIM-2296`)
* Corrected an issue with precondition blocks being skipped unintentionally for nodes in certain situations involving :command:`priority_selectors<advanced_behavior_tree.priority_selector>`. (:issue:`AFSIM-2364`)
