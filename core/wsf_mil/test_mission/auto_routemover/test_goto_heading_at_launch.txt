# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# Test that GoToHeading() can be called on a fired platform 
# when on_create is called (prior to platform initialization)

platform_type plat_type WSF_PLATFORM
   icon Wedge
   side blue
   add mover WSF_AIR_MOVER
      maximum_climb_rate 100 kts
      maximum_flight_path_angle 30 deg
      #maximum_turn_rate 5 deg/s
   end_mover
   execute at_time 100 s relative
      double error = MATH.Fabs(Heading() - 90);
      if (error > 1)
      {
         writeln("-FAIL- Bad heading");
      }
      error = MATH.Fabs(Speed() - 260);
      if (error > 1)
      {
         writeln("-FAIL- Bad speed");
      }
      DeletePlatform();
   end_execute
end_platform_type

platform launcher WSF_PLATFORM
   position 1n 1e
   add weapon wpn WSF_EXPLICIT_WEAPON
      launched_platform_type plat_type
      quantity 300 
      script void on_create(WsfPlatform aWeapon, WsfTrack aTrack)
         aWeapon.TurnToHeading(90.0);
         aWeapon.GoToSpeed(260.0);
      end_script
   end_weapon

   execute at_interval_of 10 s
      Weapon("wpn").Fire();
   end_execute
end_platform

end_time 5 min



