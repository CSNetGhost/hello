# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

script void RawIntervalsTestAction(string aId,
                                   string aGridDevice,
                                   string aFreeAsset,
                                   string aFreeDevice,
                                   string aStartEpoch,
                                   string aEndEpoch,
                                   string aStartTime,
                                   string aEndTime,
                                   string aDuration)
   ExpectString(aGridDevice, "none", "Grid asset device");
   ExpectBool(aFreeAsset.StartsWith("ta"), true, "Free Asset name");
   ExpectString(aFreeDevice, "camera", "Free asset device");
   
   double t0 = (double)aStartTime;
   double t1 = (double)aEndTime;
   double dt = (double)aDuration;
   ExpectBool(t1 > t0, true, "End time greater than start time");
   ExpectDouble(t1 - t0, dt, 1.0e-10, "Duration equal to difference in times");
   
   Calendar e0 = Calendar.Construct(aStartEpoch);
   Calendar e1 = Calendar.Construct(aEndEpoch);
   ExpectDouble(e1.TimeSince(e0), dt, 1.0e-10, "Epoch difference matches interval");
   ExpectDouble(e0.TimeSince(WsfDateTime.StartTime()), t0, 1.0e-2, "Start epoch matches start sim time");
   ExpectDouble(e1.TimeSince(WsfDateTime.StartTime()), t1, 1.0e-2, "End epoch matches end sim time");
end_script
