# ****************************************************************************
# CUI//REL TO USA ONLY
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# Copyright 2003-2013 The Boeing Company. All rights reserved.
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************
//***************************************************************************************
// Verify that the fires tables generated by the "fires_table_generator" scripts match
// the original (non-fires) trajectories in range, max. ord, and time.
//***************************************************************************************

include fires_table_platforms.txt

// include the file we generated
include fires_all_indirect_fire.txt


platform_type LAUNCHER_TEST FIRES_107MM_ROCKET_EXPLICIT_LAUNCHER  // change platform type
   execute at_time 0.1 seconds absolute
      WsfWeapon weapon = PLATFORM.Weapon("fires_107mm_rocket");  // change explicit weapon type
      WsfTrack targetTrack = WsfSimulation.FindPlatform("target").MakeTrack();
      writeln("Firing!");
      weapon.FireSalvo(targetTrack, 1);
   end_execute
end_platform_type

platform fires_weapon_platform_generator WEAPON_PLATFORM_GENERATOR
  position 34n 110w
   execute at_time 0.01 seconds absolute
      extern double mTotal;
      extern double mSeparation;
      //mTotal = 1;
      //mSeparation = 2000;
      CreatePlatforms("LAUNCHER_TEST");
   end_execute
end_platform

//Best way to verify is to look at the visualization
dis_interface
  record ../output/fires_table_verify_test.rep
  mover_update_timer 3 seconds
end_dis_interface

platform_availability
   //name weapon_platform_generator availability 0.0
   //name fires_weapon_platform_generator availability 0.0
end_platform_availability

end_time 2 minutes
