# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

include_once ../six_dof_types/environment/six_dof_environment.txt
include_once ../six_dof_types/weapons/aam-sr/aam-sr.txt

include_once ../processors/missile_seeker.txt
include_once ../weapon_effects/basic_effects.txt
include_once ../signatures/simple_signatures.txt
include_once ../sensors/generic_seeker.txt
include_once ../sensors/simple_generic_seeker.txt

# ------------------------------------------------------------------------------

platform_type  AAM-SR_RB6  AAM-SR

   # Setup the P6DOF mover
   mover WSF_RIGID_BODY_SIX_DOF_MOVER
      vehicle_type              AAM-SR
      update_interval           0.01 sec
      event_core_data             20 Hz
      event_kinematic_data        20 Hz
      event_engine_fuel_data      10 Hz
      event_autopilot_data         5 Hz
      event_autopilot_limits_data  1 Hz
      event_control_inputs_data    1 Hz
      event_control_surfaces_data  1 Hz
      event_force_moment_data      1 Hz
   end_mover
   
   processor guidance WSF_SIX_DOF_GUIDANCE_COMPUTER

      update_interval 0.01 sec

      phase LAUNCH_GUIDANCE
         time_constant                   0.1 sec
         proportional_navigation_gain    4
         velocity_pursuit_gain           10
         g_bias                          0
         next_phase PHASE2 when phase_time > 0.5 sec
      end_phase

      phase PHASE2
         time_constant                   0.01 sec
         proportional_navigation_gain    4
         velocity_pursuit_gain           10
         g_bias                          2
         next_phase TERMINAL_GUIDANCE when range_to_intercept < 5.0 km
      end_phase

      phase TERMINAL_GUIDANCE
         time_constant                   0 sec
         proportional_navigation_gain    4
         velocity_pursuit_gain           10
         g_bias                          0
      end_phase

   end_processor
   
end_platform_type

# ------------------------------------------------------------------------------

weapon AAM-SR_RB6-WEAPON WSF_EXPLICIT_WEAPON
   launched_platform_type AAM-SR_RB6
end_weapon

# ------------------------------------------------------------------------------

platform_type  AAM-SR-TEST  WSF_PLATFORM

   radar_signature    SIMPLE_FIGHTER_RCS
   infrared_signature SIMPLE_FIGHTER_IR_SIG
   optical_signature  SIMPLE_FIGHTER_OPTICAL_SIG
   spatial_domain     air
   side               green
   icon               aim9m
   category           weapon
   
end_platform_type

# ------------------------------------------------------------------------------

platform_type AAM-SR AAM-SR-TEST
   
   weapon_effects SR_LETHALITY

   sensor ir_seeker SIMPLE_GENERIC_SEEKER
      category ir_seeker
      on
      internal_link data_mgr
      internal_link seeker_activation
   end_sensor

   processor data_mgr WSF_TRACK_PROCESSOR
      on
      master_track_processor
      #show_state_transitions
      update_interval 0.01 sec
      purge_interval  1 sec
   end_processor

   processor short_range_fuse WSF_AIR_TARGET_FUSE
      use_current_target
      update_interval           0.1 sec
      fine_update_interval      0.01 sec
      gross_proximity_range     500 ft
      detonate_below_height_agl 20.0 ft
      detonate_below_height_msl 20.0 ft
      maximum_time_of_flight    120.0 sec
   end_processor

   processor seeker_activation verbose_seeker_activation
   end_processor

end_platform_type
