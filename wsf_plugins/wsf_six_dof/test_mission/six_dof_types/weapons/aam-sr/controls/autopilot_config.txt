# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# ##################################################################################################
# 
# This file was auto-generated by the P6DOF Tuner Plug-In for AFSIM Warlock.
# 
# Creation Date:  11 Mar 2020
# 
# ##################################################################################################

# **************************************************************************************************
# This file defines the configuration of the autopilot, including its PIDs. A PID is a proportional,
# integral, derivative feedback control technique. Multiple PIDs are used to 'define' the autopilot.
# Each control output may be influenced by one or more PIDs.
# **************************************************************************************************

autopilot_config

  control_method                    YAW_TO_TURN_ZERO_BANK

  min_taxi_turn_radius              50.0 ft   # This can be adjusted after testing

  use_simple_yaw_damper             false     # This can be set to true to damp yaw oscillations

  # ------------------------------------------------------------

  pid_group

    pid_alpha
      kp 3.29029e-06
      ki 0.0184688
      kd 0.00730707
      max_error_accum 0
      # low_pass_alpha 0.7
    end_pid_alpha

    pid_altitude
      kp 10
      ki 0
      kd 0
      max_error_accum 100
    end_pid_altitude

    pid_bank_angle
      kp 10.0107
      ki 1.39697e-09
      kd 3.87818e-05
      max_error_accum 1
    end_pid_bank_angle

    pid_beta
      kp 8.70004e-07
      ki 1.1303e-05
      kd 0.00694466
      max_error_accum 0
      # low_pass_alpha 0.7
    end_pid_beta

    pid_delta_pitch
      kp 0.6
      ki 0
      kd 0
      max_error_accum 10
    end_pid_delta_pitch

    pid_delta_roll
      kp 1
      ki 0
      kd 0
      max_error_accum 1
    end_pid_delta_roll

    pid_flightpath_angle
      kp 0.5
      ki 0
      kd 0
      max_error_accum 0.5
    end_pid_flightpath_angle

    pid_forward_accel
      kp 20
      ki 2
      kd 0
      max_error_accum 1
    end_pid_forward_accel

    pid_pitch_angle
      kp 0.5
      ki 0
      kd 0
      max_error_accum 0.5
    end_pid_pitch_angle

    pid_pitch_rate
      kp 0
      ki 0.2
      kd 0.0001
      max_error_accum 10
    end_pid_pitch_rate

    pid_roll_heading
      kp 1
      ki 0
      kd 0
      max_error_accum 2
      low_pass_alpha 0.5
    end_pid_roll_heading

    pid_roll_rate
      kp 0.0113188
      ki 1.02828e-09
      kd 7.08421e-09
      max_error_accum 0
    end_pid_roll_rate

    pid_speed
      kp 0.5
      ki 0.05
      kd 0.5
      max_error_accum 10
    end_pid_speed

    pid_taxi_forward_accel
      kp 1
      ki 0
      kd 0
      max_error_accum 1
    end_pid_taxi_forward_accel

    pid_taxi_heading
      kp 1
      ki 0.01
      kd 0
      max_error_accum 10
    end_pid_taxi_heading

    pid_taxi_speed
      kp 1
      ki 0
      kd 0
      max_error_accum 1
    end_pid_taxi_speed

    pid_taxi_yaw_rate
      kp 0.1
      ki 0.2
      kd 0
      max_error_accum 10
    end_pid_taxi_yaw_rate

    pid_vert_speed
      kp 0.0012
      ki 0
      kd 0
      max_error_accum 60
      ignore_large_error_accum 500
    end_pid_vert_speed

    pid_yaw_heading
      kp 1
      ki 0
      kd 0
      max_error_accum 1
    end_pid_yaw_heading

    pid_yaw_rate
      kp 1
      ki 0
      kd 0
      max_error_accum 1
    end_pid_yaw_rate

    limits_and_settings
      include autopilot_config_g_limits.txt
      afterburner_threshold       1
      speedbrake_threshold        0
      alpha_min                   -20
      alpha_max                   20
      pitch_rate_min              -60
      pitch_rate_max              60
      vert_speed_min              -60000
      vert_speed_max              60000
      beta_max                    20
      yaw_rate_max                60
      roll_rate_max               360
      bank_angle_max              89
      forward_accel_min           -1
      forward_accel_max           2
      taxi_speed_max_fps          10
      taxi_yaw_rate_max           10
      turn_roll_in_multiplier     4         # This can be manually 'tuned' for improved performance
      route_allowable_angle_error 5 deg     # This can be manually 'tuned' for improved performance
    end_limits_and_settings

  end_pid_group

end_autopilot_config

